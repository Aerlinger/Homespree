-# Contractor Profile Page
-#
-#  params: @contractor   # Instance of contractor for this contractor
-#==================================================================================================

#page.profile.clearfix

  -# Top information prompt (This is temporarily removed pending completion)
  -#================================================================================================
  -#=render "contractors/profiles/info_header"
  %br

  -# Top Section (Info Card and Image Carousel)
  -#================================================================================================
  .feature-strip
    #top.container
      .row-fluid.pricingTable
        = @contractor.intro_section("intro_js_start", class: "span4 option3") do
          .wrapper.white-bg

            -# Contractor Card Top: Title and logo
            -#===============================================================================================
            %ul.optionheader
              %li#title.primary-color-bg
                = best_in_place @contractor, :company_title, activator: "#company_title"
                = @contractor.edit_link(:company_title )
                %br
                %span#city_and_state= @contractor.city_and_state

              %li.price.primary-color-bg
                %span.rating{style: "font-weight: bold"}

                = image_tag @contractor.portrait_url
                = content_tag(:div, style: "position: relative;") do
                  - @contractor.portrait_upload

              %li.price
                = content_tag(:div, style: "position: relative;", class: "badges") do
                  %ul
                    = content_tag_for(:li, @contractor.badges) do |badge|
                      = image_tag badge.image_url


            -# Contractor Card: list of Fields -- name, license info, etc...
            -#===============================================================================================
            %ul.features
              - @contractor.card_item :first_name, { title: "Owner:" } do
                = @contractor.edit_link :first_name

              - @contractor.card_item :mobile_number, { display_with: :number_to_phone, title: "Phone #:" } do
                = @contractor.edit_link :mobile_number

              - @contractor.card_item :years_experience, {title: "Years Experience:" } do
                = @contractor.edit_link :years_experience

              - @contractor.card_item :license, {title: "License #:"} do
                = @contractor.edit_link :license

              - @contractor.card_item :insurance_limit, { display_with: :number_to_currency, title: "Insured up to:" } do
                = @contractor.edit_link :insurance_limit

              - @contractor.card_item :bonding_limit, { display_with: :number_to_currency, title: "Bonded for:" } do
                = @contractor.edit_link :bonding_limit

              %li.select
                =link_to "Book this painter", "#", class: "btn btn-large btn-primary", id: "book_contractor"

        -# Portfolio image carousel
        -#===============================================================================================
        .span8
          = render "contractors/profiles/portfolio"

  #helper_tabs.row
    .container
      .span8.offset4
        .row-fluid
          .span4.no-bg
            = link_to "#questions_modal", class: "link-tab" do
              %i.icon-comment.icon-white &nbsp Ask a question

          .span4.no-bg
            %a.link-tab{href: "#helper_tabs"}
              %i.icon-map-marker.icon-white &nbsp Service area
          .span4.no-bg
            %a.link-tab
              %i.icon-star.icon-white &nbsp Reviews


  -# Section Two (Description, Services Offered, and Maps
  -#================================================================================================
  #section_two.main-content
    %section.strip{style: "margin: 0;"}
      .container
        .row-fluid.title-columns
          .span5#business_description
            %h3.short_headline
              %div Business Description
            = @contractor.in_place_edit(:h6, :slogan) do
              = best_in_place @contractor, :slogan, activator: "#slogan_edit", nil: "No slogan entered"
              = render "contractors/profiles/edit_link",  activator: "slogan_edit"

            #contractor_logo
              - @contractor.logo_url

            = @contractor.in_place_edit(:p, :description) do
              = best_in_place @contractor, :description, type: :textarea, activator: "#description_edit", nil: default_description
              = render "contractors/profiles/edit_link", activator: "description_edit"

          = @contractor.intro_section("services", class: "span4") do
            %h3.short_headline
              %div Services Offered
            =render "contractors/profiles/specialties"

          = @contractor.intro_section("service_area", class: "span3") do
            %h3.short_headline
              %div Service Area
            =render "contractors/profiles/service_area"


  -#=render "contractors/profiles/question_modal"
  =render "contractors/profiles/photos_modal"
  =render "partials/clean_footer"

  -# Invisible form to upload portrait image
  = form_for @contractor, remote: true, method: :put do |f|
    .custom_file_upload
      = f.file_field :portrait_url, id: "hidden_portrait_url", onchange: "uploadfile('#hidden_portrait_url')"
      = f.submit "", class: 'image-upload'

  -# Invisible form to upload logo image
  = form_for @contractor, remote: true, method: :put do |f|
    .custom_file_upload
      = f.file_field :logo_url, id: "hidden_logo_url", onchange: "uploadfile('#hidden_logo_url')"
      = f.submit "", class: 'image-upload'