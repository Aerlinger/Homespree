// Render the relevant partials:
$("#contractor_logo").html("<%= j(render "contractors/logo") %>")
$("#contractor_portrait").html("<%= j(render "contractors/portrait") %>")

// Form will change after ajax call so reload it
$("#portrait_s3_upload").S3Uploader()
$("#portfolio_s3_upload").S3Uploader()
$("#logo_s3_upload").S3Uploader()

// And let our "refreshed" elements know to delegate a click to the form.
$('#upload_portrait').click(function (evt) {
	$('#hidden_portrait_url').click()
});

$('#upload_logo').click(function (evt) {
	$('#hidden_logo_url').click()
});

$('#upload_portfolio').click(function (evt) {
	$('#hidden_portfolio_url').click()
});

console.log("<%= params %>")

$(document).ajaxError(function(event, request) {
	var msg = request.getResponseHeader('X-Message');
	if (msg) alert(msg);
});