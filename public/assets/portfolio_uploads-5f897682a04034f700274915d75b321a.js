!function(){jQuery(function(){return $("#fileupload").fileupload({add:function(t,e){var i,n;return n=/(\.|\/)(gif|jpe?g|png)$/i,i=e.files[0],console.log("ADD"),n.test(i.type)||n.test(i.name)?(console.log("TRUE"),e.context=$(tmpl("template-upload",i)),$("#fileupload").append(e.context),e.submit()):alert(""+i.name+" is not a gif, jpeg, or png image file")},progress:function(t,e){var i;return e.context?(i=parseInt(100*(e.loaded/e.total),10),e.context.find(".bar").css("width",i+"%")):void 0},done:function(t,e){var i,n,s,o,a;return console.log("done!"),s=e.files[0],n=$("#fileupload").attr("action"),o=$("#fileupload input[name=key]").val().replace("${filename}",s.name),a=$("#fileupload").data("post"),i={},i[$("#fileupload").data("as")]=n+o,$.post(a,i),e.context?e.context.remove():void 0},fail:function(t,e){return alert(""+e.files[0].name+" failed to upload."),console.log("Upload failed:"),console.log(e)}})})}.call(this);