(function(){var e={}.hasOwnProperty;this.Mercury.Toolbar=function(){function t(e){this.options=e!=null?e:{},this.visible=this.options.visible,this.build(),this.bindEvents()}return t.prototype.build=function(){var t,n,r,i,s,o,u,a,f,l;this.element=jQuery("<div>",{"class":"mercury-toolbar-container",style:"width:10000px"}),this.element.css({width:"100%"}),this.element.appendTo((f=jQuery(this.options.appendTo).get(0))!=null?f:"body"),l=Mercury.config.toolbars;for(a in l){if(!e.call(l,a))continue;r=l[a];if(r._custom)continue;u=jQuery("<div>",{"class":"mercury-toolbar mercury-"+a+"-toolbar"}).appendTo(this.element),r._regions&&u.attr("data-regions",r._regions),i=jQuery("<div>",{"class":"mercury-toolbar-button-container"}).appendTo(u);for(n in r){if(!e.call(r,n))continue;o=r[n];if(n==="_regions")continue;t=this.buildButton(n,o),t&&t.appendTo(i)}i.css("white-space")==="nowrap"&&(s=new Mercury.Toolbar.Expander(a,{appendTo:u,"for":i}),s.appendTo(this.element)),Mercury.config.toolbars.primary&&a!=="primary"&&u.addClass("disabled")}if(!this.visible)return this.element.css({display:"none"})},t.prototype.buildButton=function(t,n){var r,i,s,o,u,a,f;if(t[0]==="_")return!1;switch(jQuery.type(n)){case"array":return f=n[0],a=n[1],o=n[2],new Mercury.Toolbar.Button(t,f,a,o,{appendDialogsTo:this.element});case"object":s=new Mercury.Toolbar.ButtonGroup(t,n);for(r in n){if(!e.call(n,r))continue;u=n[r],i=this.buildButton(r,u),i&&i.appendTo(s)}return s;case"string":return jQuery("<hr>",{"class":"mercury-"+(n==="-"?"line-separator":"separator")});default:throw Mercury.I18n('Unknown button structure -- please provide an array, object, or string for "%s".',t)}},t.prototype.bindEvents=function(){var e=this;return Mercury.on("region:focused",function(t,n){var r,i,s,o,u,a;u=e.element.find(".mercury-toolbar"),a=[];for(s=0,o=u.length;s<o;s++)i=u[s],i=jQuery(i),(r=i.data("regions"))?r.split(",").indexOf(n.region.type())>-1?a.push(i.removeClass("disabled")):a.push(void 0):a.push(void 0);return a}),Mercury.on("region:blurred",function(t,n){var r,i,s,o,u,a;u=e.element.find(".mercury-toolbar"),a=[];for(s=0,o=u.length;s<o;s++)i=u[s],i=jQuery(i),(r=i.data("regions"))?r.split(",").indexOf(n.region.type())>-1?a.push(i.addClass("disabled")):a.push(void 0):a.push(void 0);return a}),this.element.on("click",function(){return Mercury.trigger("hide:dialogs")}),this.element.on("mousedown",function(e){return e.preventDefault()})},t.prototype.height=function(e){return e==null&&(e=!1),this.visible||e?this.element.outerHeight():0},t.prototype.top=function(){return this.visible?this.element.offset().top:0},t.prototype.show=function(){return this.visible=!0,this.element.css({top:-this.element.outerHeight(),display:"block"}),this.element.animate({top:0},200,"easeInOutSine")},t.prototype.hide=function(){return this.visible=!1,this.element.hide()},t}()}).call(this);