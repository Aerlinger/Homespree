!function(){var e={}.hasOwnProperty,t=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};this.Mercury.Toolbar.Expander=function(e){function i(e,t){return this.name=e,this.options=t,this.container=this.options["for"],i.__super__.constructor.call(this,null,this.name,this.options),this.element}return t(i,e),i.prototype.build=function(){var e;return this.container.css({whiteSpace:"normal",visibility:"hidden",display:"block"}),this.containerWidth=this.container.outerWidth(),this.container.css({visibility:"visible"}),this.trigger=jQuery("<div>",{"class":"mercury-toolbar-expander"}).appendTo(null!=(e=jQuery(this.options.appendTo).get(0))?e:"body"),this.element=jQuery("<div>",{"class":"mercury-palette mercury-expander mercury-"+this.name+"-expander",style:"display:none"}),this.windowResize()},i.prototype.bindEvents=function(){var e=this;return Mercury.on("hide:dialogs",function(t,i){return i!==e?e.hide():void 0}),Mercury.on("resize",function(){return e.windowResize()}),i.__super__.bindEvents.apply(this,arguments),this.trigger.click(function(t){var i,n,r,s,o;for(t.stopPropagation(),n=[],o=e.container.find(".mercury-button"),r=0,s=o.length;s>r;r++)i=o[r],i=jQuery(i),i.position().top>5&&n.push(i.data("expander"));return e.loadContent(n.join("")),e.toggle()}),this.element.click(function(t){var i,n;return n=jQuery(t.target).closest("[data-button]").data("button"),i=e.container.find(".mercury-"+n+"-button"),i.click()})},i.prototype.windowResize=function(){return this.containerWidth>jQuery(window).width()?this.trigger.show():this.trigger.hide(),this.hide()},i.prototype.position=function(e){var t,i;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),t=this.trigger.position(),i=this.element.width(),t.left+i>jQuery(window).width()&&(t.left=t.left-i+this.trigger.width()),this.element.css({top:t.top+this.trigger.height(),left:t.left,display:e?"block":"none",visibility:"visible"})},i}(Mercury.Palette)}.call(this);