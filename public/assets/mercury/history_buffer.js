!function(){this.Mercury.HistoryBuffer=function(){function t(t){this.maxLength=null!=t?t:200,this.index=0,this.stack=[],this.markerRegExp=/<em class="mercury-marker"><\/em>/g}return t.prototype.push=function(t){if("string"===jQuery.type(t)){if(this.stack[this.index]&&this.stack[this.index].replace(this.markerRegExp,"")===t.replace(this.markerRegExp,""))return}else if("object"===jQuery.type(t)&&t.html&&this.stack[this.index]&&this.stack[this.index].html===t.html)return;return this.stack=this.stack.slice(0,this.index+1),this.stack.push(t),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1},t.prototype.undo=function(){return this.index<1?null:(this.index-=1,this.stack[this.index])},t.prototype.redo=function(){return this.index>=this.stack.length-1?null:(this.index+=1,this.stack[this.index])},t}()}.call(this);