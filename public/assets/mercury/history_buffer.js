(function(){this.Mercury.HistoryBuffer=function(){function e(e){this.maxLength=e!=null?e:200,this.index=0,this.stack=[],this.markerRegExp=/<em class="mercury-marker"><\/em>/g}return e.prototype.push=function(e){if(jQuery.type(e)==="string"){if(this.stack[this.index]&&this.stack[this.index].replace(this.markerRegExp,"")===e.replace(this.markerRegExp,""))return}else if(jQuery.type(e)==="object"&&e.html&&this.stack[this.index]&&this.stack[this.index].html===e.html)return;return this.stack=this.stack.slice(0,this.index+1),this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1},e.prototype.undo=function(){return this.index<1?null:(this.index-=1,this.stack[this.index])},e.prototype.redo=function(){return this.index>=this.stack.length-1?null:(this.index+=1,this.stack[this.index])},e}()}).call(this);