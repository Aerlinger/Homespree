!function(){var e={}.hasOwnProperty;this.Mercury.Toolbar=function(){function t(e){this.options=null!=e?e:{},this.visible=this.options.visible,this.build(),this.bindEvents()}return t.prototype.build=function(){var t,i,n,r,o,s,a,l,c,u;this.element=jQuery("<div>",{"class":"mercury-toolbar-container",style:"width:10000px"}),this.element.css({width:"100%"}),this.element.appendTo(null!=(c=jQuery(this.options.appendTo).get(0))?c:"body"),u=Mercury.config.toolbars;for(l in u)if(e.call(u,l)&&(n=u[l],!n._custom)){a=jQuery("<div>",{"class":"mercury-toolbar mercury-"+l+"-toolbar"}).appendTo(this.element),n._regions&&a.attr("data-regions",n._regions),r=jQuery("<div>",{"class":"mercury-toolbar-button-container"}).appendTo(a);for(i in n)e.call(n,i)&&(s=n[i],"_regions"!==i&&(t=this.buildButton(i,s),t&&t.appendTo(r)));"nowrap"===r.css("white-space")&&(o=new Mercury.Toolbar.Expander(l,{appendTo:a,"for":r}),o.appendTo(this.element)),Mercury.config.toolbars.primary&&"primary"!==l&&a.addClass("disabled")}return this.visible?void 0:this.element.css({display:"none"})},t.prototype.buildButton=function(t,i){var n,r,o,s,a,l,c;if("_"===t[0])return!1;switch(jQuery.type(i)){case"array":return c=i[0],l=i[1],s=i[2],new Mercury.Toolbar.Button(t,c,l,s,{appendDialogsTo:this.element});case"object":o=new Mercury.Toolbar.ButtonGroup(t,i);for(n in i)e.call(i,n)&&(a=i[n],r=this.buildButton(n,a),r&&r.appendTo(o));return o;case"string":return jQuery("<hr>",{"class":"mercury-"+("-"===i?"line-separator":"separator")});default:throw Mercury.I18n('Unknown button structure -- please provide an array, object, or string for "%s".',t)}},t.prototype.bindEvents=function(){var e=this;return Mercury.on("region:focused",function(t,i){var n,r,o,s,a,l;for(a=e.element.find(".mercury-toolbar"),l=[],o=0,s=a.length;s>o;o++)r=a[o],r=jQuery(r),(n=r.data("regions"))?n.split(",").indexOf(i.region.type())>-1?l.push(r.removeClass("disabled")):l.push(void 0):l.push(void 0);return l}),Mercury.on("region:blurred",function(t,i){var n,r,o,s,a,l;for(a=e.element.find(".mercury-toolbar"),l=[],o=0,s=a.length;s>o;o++)r=a[o],r=jQuery(r),(n=r.data("regions"))?n.split(",").indexOf(i.region.type())>-1?l.push(r.addClass("disabled")):l.push(void 0):l.push(void 0);return l}),this.element.on("click",function(){return Mercury.trigger("hide:dialogs")}),this.element.on("mousedown",function(e){return e.preventDefault()})},t.prototype.height=function(e){return null==e&&(e=!1),this.visible||e?this.element.outerHeight():0},t.prototype.top=function(){return this.visible?this.element.offset().top:0},t.prototype.show=function(){return this.visible=!0,this.element.css({top:-this.element.outerHeight(),display:"block"}),this.element.animate({top:0},200,"easeInOutSine")},t.prototype.hide=function(){return this.visible=!1,this.element.hide()},t}()}.call(this);