(function(){this.Mercury.tooltip=function(t,e,i){return null==i&&(i={}),Mercury.tooltip.show(t,e,i),Mercury.tooltip},jQuery.extend(Mercury.tooltip,{show:function(t,e,i){return this.forElement=t,this.content=e,this.options=null!=i?i:{},this.document=this.forElement.get(0).ownerDocument,this.initialize(),this.visible?this.update():this.appear()},initialize:function(){return this.initialized?void 0:(this.build(),this.bindEvents(),this.initialized=!0)},build:function(){var t;return this.element=jQuery("<div>",{"class":"mercury-tooltip"}),this.element.appendTo(null!=(t=jQuery(this.options.appendTo).get(0))?t:"body")},bindEvents:function(){var t,e,i,n,s=this;for(Mercury.on("resize",function(){return s.visible?s.position():void 0}),this.element.on("mousedown",function(t){return t.preventDefault(),t.stopPropagation()}),n=this.forElement.parentsUntil(jQuery("body",this.document)),e=0,i=n.length;i>e;e++)t=n[e],t.scrollHeight>t.clientHeight&&jQuery(t).on("scroll",function(){return s.visible?s.position():void 0});return jQuery(this.document).on("scroll",function(){return s.visible?s.position():void 0})},appear:function(){var t=this;return this.update(),this.element.show(),this.element.animate({opacity:1},200,"easeInOutSine",function(){return t.visible=!0})},update:function(){return this.element.html(this.content),this.position()},position:function(){var t,e,i,n;return e=this.forElement.offset(),n=this.element.width(),i=e.top+(Mercury.displayRect.top-jQuery(this.document).scrollTop())+this.forElement.outerHeight(),t=e.left-jQuery(this.document).scrollLeft(),t+n+25>Mercury.displayRect.width&&(t=t-(t+n+25)-Mercury.displayRect.width),t=0>=t?0:t,this.element.css({top:i,left:t})},hide:function(){return this.initialized?(this.element.hide(),this.visible=!1):void 0}})}).call(this);