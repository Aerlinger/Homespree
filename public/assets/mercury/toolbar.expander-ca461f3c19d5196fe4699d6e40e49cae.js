(function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var s in i)t.call(i,s)&&(e[s]=i[s]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};this.Mercury.Toolbar.Expander=function(t){function i(t,e){return this.name=t,this.options=e,this.container=this.options["for"],i.__super__.constructor.call(this,null,this.name,this.options),this.element}return e(i,t),i.prototype.build=function(){var t;return this.container.css({whiteSpace:"normal",visibility:"hidden",display:"block"}),this.containerWidth=this.container.outerWidth(),this.container.css({visibility:"visible"}),this.trigger=jQuery("<div>",{"class":"mercury-toolbar-expander"}).appendTo(null!=(t=jQuery(this.options.appendTo).get(0))?t:"body"),this.element=jQuery("<div>",{"class":"mercury-palette mercury-expander mercury-"+this.name+"-expander",style:"display:none"}),this.windowResize()},i.prototype.bindEvents=function(){var t=this;return Mercury.on("hide:dialogs",function(e,i){return i!==t?t.hide():void 0}),Mercury.on("resize",function(){return t.windowResize()}),i.__super__.bindEvents.apply(this,arguments),this.trigger.click(function(e){var i,n,s,r,o;for(e.stopPropagation(),n=[],o=t.container.find(".mercury-button"),s=0,r=o.length;r>s;s++)i=o[s],i=jQuery(i),i.position().top>5&&n.push(i.data("expander"));return t.loadContent(n.join("")),t.toggle()}),this.element.click(function(e){var i,n;return n=jQuery(e.target).closest("[data-button]").data("button"),i=t.container.find(".mercury-"+n+"-button"),i.click()})},i.prototype.windowResize=function(){return this.containerWidth>jQuery(window).width()?this.trigger.show():this.trigger.hide(),this.hide()},i.prototype.position=function(t){var e,i;return this.element.css({top:0,left:0,display:"block",visibility:"hidden"}),e=this.trigger.position(),i=this.element.width(),e.left+i>jQuery(window).width()&&(e.left=e.left-i+this.trigger.width()),this.element.css({top:e.top+this.trigger.height(),left:e.left,display:t?"block":"none",visibility:"visible"})},i}(Mercury.Palette)}).call(this);