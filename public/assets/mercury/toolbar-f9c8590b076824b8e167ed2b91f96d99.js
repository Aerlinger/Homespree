(function(){var t={}.hasOwnProperty;this.Mercury.Toolbar=function(){function e(t){this.options=null!=t?t:{},this.visible=this.options.visible,this.build(),this.bindEvents()}return e.prototype.build=function(){var e,i,n,s,r,o,a,l,c,u;this.element=jQuery("<div>",{"class":"mercury-toolbar-container",style:"width:10000px"}),this.element.css({width:"100%"}),this.element.appendTo(null!=(c=jQuery(this.options.appendTo).get(0))?c:"body"),u=Mercury.config.toolbars;for(l in u)if(t.call(u,l)&&(n=u[l],!n._custom)){a=jQuery("<div>",{"class":"mercury-toolbar mercury-"+l+"-toolbar"}).appendTo(this.element),n._regions&&a.attr("data-regions",n._regions),s=jQuery("<div>",{"class":"mercury-toolbar-button-container"}).appendTo(a);for(i in n)t.call(n,i)&&(o=n[i],"_regions"!==i&&(e=this.buildButton(i,o),e&&e.appendTo(s)));"nowrap"===s.css("white-space")&&(r=new Mercury.Toolbar.Expander(l,{appendTo:a,"for":s}),r.appendTo(this.element)),Mercury.config.toolbars.primary&&"primary"!==l&&a.addClass("disabled")}return this.visible?void 0:this.element.css({display:"none"})},e.prototype.buildButton=function(e,i){var n,s,r,o,a,l,c;if("_"===e[0])return!1;switch(jQuery.type(i)){case"array":return c=i[0],l=i[1],o=i[2],new Mercury.Toolbar.Button(e,c,l,o,{appendDialogsTo:this.element});case"object":r=new Mercury.Toolbar.ButtonGroup(e,i);for(n in i)t.call(i,n)&&(a=i[n],s=this.buildButton(n,a),s&&s.appendTo(r));return r;case"string":return jQuery("<hr>",{"class":"mercury-"+("-"===i?"line-separator":"separator")});default:throw Mercury.I18n('Unknown button structure -- please provide an array, object, or string for "%s".',e)}},e.prototype.bindEvents=function(){var t=this;return Mercury.on("region:focused",function(e,i){var n,s,r,o,a,l;for(a=t.element.find(".mercury-toolbar"),l=[],r=0,o=a.length;o>r;r++)s=a[r],s=jQuery(s),(n=s.data("regions"))?n.split(",").indexOf(i.region.type())>-1?l.push(s.removeClass("disabled")):l.push(void 0):l.push(void 0);return l}),Mercury.on("region:blurred",function(e,i){var n,s,r,o,a,l;for(a=t.element.find(".mercury-toolbar"),l=[],r=0,o=a.length;o>r;r++)s=a[r],s=jQuery(s),(n=s.data("regions"))?n.split(",").indexOf(i.region.type())>-1?l.push(s.addClass("disabled")):l.push(void 0):l.push(void 0);return l}),this.element.on("click",function(){return Mercury.trigger("hide:dialogs")}),this.element.on("mousedown",function(t){return t.preventDefault()})},e.prototype.height=function(t){return null==t&&(t=!1),this.visible||t?this.element.outerHeight():0},e.prototype.top=function(){return this.visible?this.element.offset().top:0},e.prototype.show=function(){return this.visible=!0,this.element.css({top:-this.element.outerHeight(),display:"block"}),this.element.animate({top:0},200,"easeInOutSine")},e.prototype.hide=function(){return this.visible=!1,this.element.hide()},e}()}).call(this);